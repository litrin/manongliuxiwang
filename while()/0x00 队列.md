##0x00 队列

“Hi, 刘希望！我是运营部的小胡。” 
“小胡你好！什么事情找我？” 
“是这样的，不是前些天双11嘛。我们现在营销费用还剩一些budget， 现在觉得可以给一部分用户一些额外回馈。” 
“那好啊，是要我帮你查用户数据吗？” 
“这次不需要，我等下会发给你用户列表。对应的20元代金券我们会下班前发放给他们，我们现在要您这边帮忙把对应短信发送到他们的手机上就好了。” 
“OK，怎么发给我？哎，不对，大概有多少个用户？” 
“大约2900多个吧。你们这边怎么方便啊？” 
“2900多，2900多的话你就用Execl吧，方便编辑，一栏写电话号码，一栏写称呼，写好了一条短信向下一拉到底就好了。写完之后呢，直接发给蓓蓓，抄送我就可以了。” 
“好的，我去试试！谢谢您！” 
“客气了，再见！” 

过完了双十一，其实大家都懂的一个道理就是：在年底之前不会再有什么大的促销要忙活了。公司上下都松松垮垮的，这不，吃完午饭很久了，大家任然沉浸在中午那些油腻食物被消化过程中的困倦中。直到运营部的小胡用电话铃声吵醒了整个IT部门。 
看着周围的人用各种稀奇古怪的姿势睡觉，刘希望也忍不住喊了一声：“起床了，准备开工！在工作区里睡觉像什么样子！”正说着，自己也忍不住的打了一个大大的哈欠。他慢腾腾的站了起来，伸了一个懒腰，又缓缓的坐在了自己的椅子上。 

“蓓蓓，别睡了！”此时的蓓蓓正把脑袋随便的搁在自己的桌子上，一只手揽着一个卡通造型的靠枕做支撑，另一只手里攥着她的眼镜，一只脚上的鞋已经直接掉在了地上。而且如果没有看错的话，现在她的辫子更是直接压在了键盘上，也不知道他的电脑该如何对这个长按的按键做出反应。“蓓蓓！去看看我们现在的短信中心还能发多少条短信？” 
蓓蓓起身，戴上了眼镜，嘴里还在丝丝拉拉的吞咽着口水。刘希望刚才还在纳闷的按键问题得到了验证——在进入系统之前，蓓蓓似乎花了很长时间清除密码栏里本不应该存在的字符。 

也不知过了多久，蓓蓓才慢慢的说道：“4000条不到一点，3700，3800条吧。”她一边说着，一边拿着杯子起身，看样子她现在还是没有完全清醒过来。 
“等会儿呢？小胡会发一个excel表格给你，你就直接按照她给你的内容发短信。大约2900条左右吧，剩余的短信够用的，然后下午让运营部写申请要钱给短信中心充值。” 
手里拿着杯子的蓓蓓在刘希望cube背后的位置停了下来，问道：“excel怎么发？我们不都是文本格式的，一行一条吗？” 
“你还是先去泡杯咖啡吧，看你这没睡醒的样子，黏贴复制不会啊？”刘希望抬头看了蓓蓓一眼，马上被蓓蓓脸上压出的衣服印子给逗乐了。 
蓓蓓若有所思的点着头走出了IT部门的办公区。 

看起来“中南海”那边也同样是暮气沉沉的状态，直到接近一个半小时之后，刘希望才收到了来自小胡的那封邮件。 
“蓓蓓，邮件来了，开工了！”刘希望的眼睛在整个办公区扫视着，最后，停在了蓓蓓旁边的小庄身上。“那个那个，小庄！先停下手里的活，看着你蓓蓓姐发短信。”刘希望之所以一定要选择一个人看着蓓蓓，其实正是出于一个规矩：对于直接送达客户的邮件或者短信之类无法回退的操作，都必须有一个人做double check。 
安排好了这些任务之后，百无聊赖的刘希望嘴里喃喃的说着：“喝点水喝点水，喝水越多，水平越高。”拿起一个杯子就走出了自己的cube。 

等刘希望回来之后，整个人似乎还没有睡醒的样子。懒洋洋的坐在椅子上看着自己的电脑发呆。不知过了多久，他似乎听到蓓蓓和小庄两个人在窃窃私语着，而且状态很不对劲。言语中翻来覆去的出现“错了”，“肯定有问题”之类的话。不明就里的刘希望起身把头凑了过去，来了一句：“啥事儿见不得人，要偷偷摸摸的说？” 
忽然，刘希望发现坐在cube里的蓓蓓脸色都变了，她似乎全身都在发抖，颤颤巍巍的说：“Ex……Execel表格的数据有问题，给最后一个用户送出了3000多块钱！”蓓蓓的电脑屏幕正中央是一个打开的Execel文件，光标落在整个文件的最后一行，一个因为宽度不够被收缩的表格被选中之后，内容栏的最后赫然出现了“￥2987”的字样。 
“不是说好了20一个人的吗？怎么会出现这个数字？这也不是个整数啊？”刘希望不解的将光标上移，“￥2986”，再上移，“￥2985”！有些抓狂的刘希望索性按下了“ctrl+上”回到了表头，一个本应是正确的数字“￥20”出现在了他的眼前，下一行，“￥21”！。 
“新版的Excel会通过下拉动作自动把任何语句中的数字自动累加，这他妈什么弱智功能！”刘希望惊声尖叫了出来。 
“都发出去了吗？”刘希望本想平静一下情绪，但明显没有做到位，他几乎是嚷道：“我问你：都发出去了吗？” 
已经急得哭出来的蓓蓓说：“撤不掉了，都已经全部进了那边的队列了！” 
还不等蓓蓓继续解释完，刘希望一把抓住蓓蓓的椅背，把蓓蓓，连同她坐的转椅像一个手推车那样的从她的cube里拖了出来，放在一边，自己直接接管了蓓蓓的电脑。而对于这个很不礼貌的行为，刘希望似乎没有一点想要停下来道歉的意思。因为这个时候的刘希望体内的所有血液都涌到了头上——他脖子的青筋一下子全部爆了出来，耳朵也传出了嗡嗡的响声。头脑里浮现的第一个画面居然是那个“等差数列求和”公式（a+b)*n/2和那个曾经在英语课本中出现的高斯的故事…… 

十几秒的迟疑之后，刘希望瞟了蓓蓓的屏幕一眼，最后一条历史记录表明，据上次发送指令下达已经过去了接近8分钟。 

“小闫！闫欢！！”刘希望不顾在工作区不得大声喧哗的禁令，大声的吼了起来。 
不知刚才躲在哪里的闫欢像是被这一声吼给吓到了，他靠在一个隔断上，怔了一下，远远的张望着刘希望不敢向前走，怯怯的说：“我在这儿，希望~哥！” 
刘希望一把扯下了挂在自己脖子上的胸牌，远远的扔给了闫欢，大声且快速的说到：“你跑去二楼机房，进门就给右手边客服部的电话交换机断电！别问为什么，快去！跑着去！做完之后等在机房电话边！”闫欢往前跨了两步，总算稳稳的接到了那个飞过来的胸牌。走廊里响起了“咚咚咚”的脚步声。 
这时的刘希望回过头来，看着蓓蓓。她还是一副吓的六神无主的样子。考虑到她那只随时会掉的鞋，看来是不能指望她干跑腿的活儿了。 
“庄！跑去客服那边——对，三楼Vivian，别多解释，直接找到她本人，她要你帮忙就帮。她本人不在就直接在他们那边喊几遍，所有的角落都要喊到，就说：‘受到外部攻击，暂停各种服务！’——这个是他们演习过的，他们知道该怎么回应！！” 
目送着小庄也咚咚咚地跑远，刘希望跟蓓蓓说：“你，去快去帮我到金鱼缸那边的咖啡机去用下面的纸杯倒杯美式咖啡去，不要倒错，拿到咖啡之后马上就回来，别问为什么，去就是了！” 

刘希望试图操作蓓蓓的电脑，无奈电脑的角度对于站着的刘希望来说实在太低了，他只能用一种很怪异的蹲姿操纵着。旁边的小明知趣的拖了一把椅子塞到刘希望的身后。刘希望还没来的急道谢就直接对小明说：“你先拨好机房的电话，等2分半钟之后，也就是看到蓓蓓端咖啡进来的时候——这两个操作的距离和时间都差不多，你就让闫欢直接拔掉第二个机柜所有的黄色网线，只留那根红的。”刘希望尽可能的在这种状态下表达好自己的意图。 
小明不解的说：“这样的话不就直接进维护状态了吗？” 
“要的就是这个效果！打完电话不要挂，你打完电话一直F5刷页面，直到出现维护界面之后就让闫欢回去开电话交换机。刷到第10次见不到维护界面，你就直接跑上去拔线！” 
整个部门的人似乎都被刘希望反差如此巨大的表现跟镇住了，整个IT部没有任何人敢提出异议，全都像开足了发条似的四处乱窜。 

刘希望从口袋里掏出手机，打起了电话。 一声，两声，三声…… 
“是李经理吧，我，刘希望！……我们现在有个很重要的事情，你先给我加2500条短信……什么，人不在公司？……对，最多给你半个小时，快！……什么3分一条7分一条的，一毛一条老子都要，少罗嗦了，钱下班之前划到你支付宝。……不跟你啰嗦，半小时内搞不定的话谁也保不住你们下个月的订单。——对了，跟你确认下，你们的短信队列是5000条一小时吗？……什么，是6000条！还是保守数字！……好，知道了！” 
这个时候，据指令下达已经过去了9分钟以上，如果按照刚才说的6000条一小时最保守的吞吐能力来计算，差不多超过一半的短信都已经发送出去了。应该有不少用户的短信收件箱里已经出现了超过1000快的代金券。不过相信对于大多数人来说，这个时间上应该不会有太多的人去网上验收过。 

蓓蓓的手里端着一杯冒着热气的咖啡出现在了工作区。来回的距离加上15秒的咖啡时间如果没有计算失误的话，这应该是第11分钟左右的事请了。于此同时小明已经打通了到机房的电话。在听说“IT老大发飙了”之后，周围已经聚集了很多其他部门的同事，他们大概已经能从刘希望急促的谈话中明白了事情的缘由。 
“那个，你们谁帮个忙找下运营部的小胡？——胡，德，萍！就说让她自己好好看看自己发给我的邮件。我忙完了之后打电话给她！”刘希望大声的对周围的人说到，人群中有人应着声转过身打起了电话。 
又过了半分钟的样子之后，带着一阵咚咚咚地脚步声，小庄一副气喘吁吁的样子从3楼跑了回来。 
“小庄，直接跟小胡说现在的状况——告诉他你所有知道的就行。”又是一条指令送了出去。 

接近12分钟了，如果按照最乐观估计的话，到这个时间上，所有的短信已经发送完毕。这个大祸已经闯下了！ 

刘希望打开那个制造祸端的Excel文件，用鼠标直接删除了第二列之后的所有内容，那正是消息的主体部分。他点击了作为第一列的手机号码栏看了一眼——谢天谢地，那是按照数字大小排序的规则。刘希望直接在Excel的工具栏上选择了逆向排序。在他犹豫了片刻之后，开始动手在表格的第二栏里打字，蓓蓓的中文输入法跟刘希望自己电脑的完全不一样，刘希望花了大约一分半钟才完成这段话。 

	亲爱的xx会员：非常抱歉，由于我们的系统受到了不明攻击，部分用户收到了错误的短信。为此我们附赠价值20元的代金券以表歉意。多有打扰敬请谅解！

刘希望下意识的摇摇头，把这段文字贴到另一个打开的word窗口里，70个字符，不多不少，正好可以放入一条短信。 

“蓓蓓，麻烦你过来通读一下，看看有没有问题，我要群发短信了！” 
“你没经过运营和公关直接给用户发短信是不是越权了？”坐在刘希望两边的蓓蓓和小明几乎同时说出相同的话。 
“少扯皮，是我自己发的，钱我自己付的！什么越权不越权的,越不越权我都要交辞职报告了，还不如先把这屁股擦干净再说！”此话一出，蓓蓓低头不语。 
“应该语句上没有什么歧义。”背后不知道谁说了这么一句话。 
刘希望犹豫了片刻，把同样的语句复制到第二行，同时选中了两行之后，再次一拉到底。打开“上传文件”按钮之后，选择好了刚刚修改的文件。再次看了一眼之后，深深的吸了一口气，按下了“发送”按钮。 

鼠标指针变成了一个沙漏……页面变成了一片空白……页面被重新加载了出来……一个弹出框出现在了页面正中：“发送成功！” 
刘希望总算把刚才吸进去的空气呼了出来。这是第14分钟之后的事儿了。刘希望看了看蓓蓓端来的咖啡，一口气喝了一大半。他直接用自己的袖子抹了一把嘴，继而向蓓蓓摆出了一个笑脸，“谢谢你的咖啡！” 
不知所措的蓓蓓连忙答复着：“没关系！”——兴许她想说的是：“别客气！” 

“那么，其他的好了吗？”，刘希望随手就用蓓蓓的电脑刷了一下公司网站的首页，一张红色的大幕挡在所有的商品前面——这正是公司网站的维护界面。“维护界面，OK！”他自言自语到。他又顺手抓起蓓蓓的电话机，拨通了公司的客服电话，一直是等待提示音，没有人接听。“应该是交换机还没起来。”他还是在自问自答。 
“我还是去机房看看吧。”小明站了起来，挤出围观的人群，走了出去。这个时候，差不多有接近20个来自各个部门的同事围到了IT部的办公区，更是有几个人直接站在了刘希望的椅背后面。这是一个很诡异的场景，所有的人都一言不发地，直勾勾的眼睛都盯着坐在蓓蓓cube里的刘希望，处在后排的几个人甚至脚尖都掂了起来。 
“大家都散了吧！散了吧，站在这里他们压力太大。”人群中传出了应该是来自Chris的声音。可这句话明显没有奏效，在场的任何人都没有离开的意思。 
刘希望继续回过头，继续刷着短信发送界面的控制面板，忽然一个数字的变化让他的眼前一亮：“老李靠谱的，已经给我开放短信了！最后一个不确定的东西确定了！” 他又一次的拿起了电话机，按了一下重拨键，在传统的3声振铃之后，又响了2声振铃，接着电话居然接通了！。不等对面的同事说话，他就直接挂掉了电话，兴奋的对大家说：“没啥好看的了，所有的任务已经进了队列，再过个10~15分钟我们就恢复网站！”尽管这个语气还是有明显的异常，但这次，他的语气缓和了下来。 

这个时候从时间上粗粗算起，应该是在第一封短消息发送后的第15分钟之后。刘希望把纸杯里最后的一滴咖啡倒进自己的嘴巴里，砸吧了一下，他终于可以慢悠悠的说：“越来越淡了。” 
